<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS Benchmark Results</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .input-section {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .results-section {
            padding: 30px;
            display: none;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-header h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .timestamp {
            color: #7f8c8d;
            font-size: 14px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .results-table th {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .results-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .results-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .results-table tr:hover {
            background-color: #e3f2fd;
            transition: background-color 0.3s;
        }

        .rank {
            font-weight: bold;
            font-size: 1.2em;
        }

        .rank-1 { color: #f39c12; }
        .rank-2 { color: #95a5a6; }
        .rank-3 { color: #e67e22; }

        .dns-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .response-time {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .fast { color: #27ae60; }
        .medium { color: #f39c12; }
        .slow { color: #e74c3c; }
        .failed { color: #c0392b; background-color: #fadbd8; }

        .status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status.success { background-color: #d5f4e6; color: #27ae60; }
        .status.warning { background-color: #fef9e7; color: #f39c12; }
        .status.error { background-color: #fadbd8; color: #e74c3c; }

        .ip-addresses {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #7f8c8d;
            max-width: 200px;
            word-wrap: break-word;
        }

        .summary {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            border-radius: 10px;
        }

        .summary h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .summary-item {
            margin-bottom: 8px;
            color: #34495e;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .input-section, .results-section {
                padding: 20px;
            }
            
            .results-table {
                font-size: 14px;
            }
            
            .results-table th,
            .results-table td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ DNS Benchmark Analyzer</h1>
            <p>Paste your DNS test results and get a beautiful analysis</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="dnsResults">Paste your DNS benchmark results here:</label>
                <textarea id="dnsResults" placeholder="Testing Google (8.8.8.8):
142.250.77.174

real    0m0.040s
user    0m0.000s
sys     0m0.011s
---
Testing Cloudflare (1.1.1.1):
..."></textarea>
            </div>
            <button class="btn" onclick="parseResults()">üîç Analyze Results</button>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <h2>üìä DNS Performance Analysis</h2>
                <div class="timestamp" id="timestamp"></div>
            </div>
            
            <table class="results-table" id="resultsTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>DNS Provider</th>
                        <th>IP Address</th>
                        <th>Response Time</th>
                        <th>Status</th>
                        <th>Resolved IPs</th>
                    </tr>
                </thead>
                <tbody id="resultsBody">
                </tbody>
            </table>

            <div class="summary" id="summary">
                <h3>üìà Summary</h3>
                <div id="summaryContent"></div>
            </div>
        </div>
    </div>

    <script>
        function parseResults() {
            const input = document.getElementById('dnsResults').value;
            const lines = input.split('\n');
            const results = [];
            let currentTest = null;

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                // Check for test start
                const testMatch = line.match(/Testing (.+?) \((.+?)\):/);
                if (testMatch) {
                    if (currentTest) {
                        results.push(currentTest);
                    }
                    currentTest = {
                        name: testMatch[1],
                        ip: testMatch[2],
                        resolvedIPs: [],
                        responseTime: null,
                        status: 'success'
                    };
                    continue;
                }

                // Check for resolved IP
                if (currentTest && line.match(/^\d+\.\d+\.\d+\.\d+$/)) {
                    currentTest.resolvedIPs.push(line);
                    continue;
                }

                // Check for response time
                const timeMatch = line.match(/real\s+0m(\d+\.\d+)s/);
                if (timeMatch && currentTest) {
                    currentTest.responseTime = parseFloat(timeMatch[1]);
                    continue;
                }

                // Check for errors
                if (line.includes("couldn't get address") || line.includes("not found")) {
                    if (currentTest) {
                        currentTest.status = 'failed';
                        currentTest.responseTime = null;
                    }
                }
            }

            // Add the last test
            if (currentTest) {
                results.push(currentTest);
            }

            displayResults(results);
        }

        function displayResults(results) {
            // Sort by response time (failed tests go to bottom)
            results.sort((a, b) => {
                if (a.status === 'failed' && b.status !== 'failed') return 1;
                if (b.status === 'failed' && a.status !== 'failed') return -1;
                if (a.status === 'failed' && b.status === 'failed') return 0;
                return a.responseTime - b.responseTime;
            });

            const tbody = document.getElementById('resultsBody');
            tbody.innerHTML = '';

            results.forEach((result, index) => {
                const row = document.createElement('tr');
                
                // Determine performance class
                let performanceClass = '';
                let statusClass = '';
                let statusText = '';
                
                if (result.status === 'failed') {
                    performanceClass = 'failed';
                    statusClass = 'error';
                    statusText = 'Failed';
                } else {
                    if (result.responseTime <= 0.05) {
                        performanceClass = 'fast';
                        statusClass = 'success';
                        statusText = 'Excellent';
                    } else if (result.responseTime <= 0.08) {
                        performanceClass = 'medium';
                        statusClass = 'warning';
                        statusText = 'Good';
                    } else {
                        performanceClass = 'slow';
                        statusClass = 'warning';
                        statusText = 'Slow';
                    }
                }

                // Rank styling
                let rankClass = '';
                if (index === 0 && result.status !== 'failed') rankClass = 'rank-1';
                else if (index === 1 && result.status !== 'failed') rankClass = 'rank-2';
                else if (index === 2 && result.status !== 'failed') rankClass = 'rank-3';

                const rankEmoji = index === 0 && result.status !== 'failed' ? 'ü•á' : 
                                 index === 1 && result.status !== 'failed' ? 'ü•à' : 
                                 index === 2 && result.status !== 'failed' ? 'ü•â' : '';

                row.innerHTML = `
                    <td class="rank ${rankClass}">${rankEmoji} ${index + 1}</td>
                    <td class="dns-name">${result.name}</td>
                    <td class="ip-addresses">${result.ip}</td>
                    <td class="response-time ${performanceClass}">
                        ${result.status === 'failed' ? 'FAILED' : (result.responseTime * 1000).toFixed(1) + 'ms'}
                    </td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td class="ip-addresses">${result.resolvedIPs.slice(0, 3).join('<br>')}${result.resolvedIPs.length > 3 ? '<br>...' : ''}</td>
                `;
                
                tbody.appendChild(row);
            });

            // Generate summary
            generateSummary(results);

            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('timestamp').textContent = `Generated on ${new Date().toLocaleString()}`;
        }

        function generateSummary(results) {
            const successful = results.filter(r => r.status !== 'failed');
            const failed = results.filter(r => r.status === 'failed');
            
            let summaryHTML = '';
            
            if (successful.length > 0) {
                const fastest = successful[0];
                const slowest = successful[successful.length - 1];
                const avgTime = successful.reduce((sum, r) => sum + r.responseTime, 0) / successful.length;
                
                summaryHTML += `
                    <div class="summary-item">üèÜ <strong>Fastest DNS:</strong> ${fastest.name} (${(fastest.responseTime * 1000).toFixed(1)}ms)</div>
                    <div class="summary-item">üêå <strong>Slowest DNS:</strong> ${slowest.name} (${(slowest.responseTime * 1000).toFixed(1)}ms)</div>
                    <div class="summary-item">üìä <strong>Average Response Time:</strong> ${(avgTime * 1000).toFixed(1)}ms</div>
                    <div class="summary-item">‚úÖ <strong>Successful Tests:</strong> ${successful.length}/${results.length}</div>
                `;
            }
            
            if (failed.length > 0) {
                summaryHTML += `<div class="summary-item">‚ùå <strong>Failed Tests:</strong> ${failed.map(f => f.name).join(', ')}</div>`;
            }
            
            document.getElementById('summaryContent').innerHTML = summaryHTML;
        }
    </script>
</body>
</html>
